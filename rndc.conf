<VirtualHost *:80>
    ServerName rndc.asegurar.com.co
    DocumentRoot /opt/rndc/frontend

    # Logs
    ErrorLog /var/log/httpd/rndc-error.log
    CustomLog /var/log/httpd/rndc-access.log combined

    # Validación SSL (igual que tu otra API)
    Alias /.well-known/pki-validation/ /var/www/html/sslapicellvi/.well-known/pki-validation/
    <Directory /var/www/html/sslapicellvi/.well-known/pki-validation/>
        Options None
        AllowOverride None
        Require all granted
    </Directory>

    # Redirigir a HTTPS (Descomenta esto cuando ya tengas el certificado instalado)
    # RewriteEngine on
    # RewriteCond %{SERVER_NAME} =rndc.asegurar.com.co
    # RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
    
    # Configuración Frontend (React) para HTTP (temporal mientras instalas SSL)
    <Directory /opt/rndc/frontend>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # React Router: redirigir todo a index.html
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.html$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_FILENAME} !-l
        RewriteRule . /index.html [L]
    </Directory>

    # Proxy para el Backend (Node.js en puerto 3000)
    ProxyPreserveHost On
    ProxyPass /api http://localhost:3000/api
    ProxyPassReverse /api http://localhost:3000/api
    
    ProxyPass /health http://localhost:3000/health
    ProxyPassReverse /health http://localhost:3000/health
</VirtualHost>

 <VirtualHost *:443>
     ServerName rndc.asegurar.com.co
     DocumentRoot /var/www/html/Apirndc

     # Aquí van tus rutas de certificados SSL
     SSLEngine on
     SSLCertificateFile /ruta/a/tu/certificado.crt
     SSLCertificateKeyFile /ruta/a/tu/clave_privada.key
     SSLCertificateChainFile /ruta/a/tu/ca_bundle.crt

     # Backend API
     ProxyPreserveHost On
     ProxyPass /api http://localhost:3000/api
     ProxyPassReverse /api http://localhost:3000/api

     ProxyPass /health http://localhost:3000/health
     ProxyPassReverse /health http://localhost:3000/health
 </VirtualHost>
